<html>
    <head>
        <script>
            // expect a callback of the format http://localhost:8000/callback#access_token=<access_token>&token_type=<token_type>&expires_in=<expires_in>&state=<state>
            // extract query parameters
            let fragment = "";
            if (window.location.hash) {
                fragment = window.location.hash.substring(1);
            } else {
                fragment = window.location.search.substring(1);
            }

            // send query parameters to backend(see SpotifyClient.finalize_implicit_grant()) and regardless of response, close the browser window
            fetch('http://localhost:8000/finalizeAuthentication?' + fragment).then(response => {
                window.close();
            }).catch(error => {
                window.close();
            });
        </script>
    </head>
    <body>
        Processing...
    </body>
</html>